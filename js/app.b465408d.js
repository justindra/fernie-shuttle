(function(e){function t(t){for(var o,r,s=t[0],u=t[1],c=t[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var o={},r={app:0},a={app:0},i=[];function s(e){return u.p+"js/"+({info:"info"}[e]||e)+"."+{info:"ca11b943"}[e]+".js"}function u(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={info:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({info:"info"}[e]||e)+"."+{info:"7f6803ca"}[e]+".css",a=u.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===o||l===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],l=c.getAttribute("data-href");if(l===o||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",d.name="ChunkLoadError",d.type=o,d.request=r,n[1](d)}a[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=o,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)u.d(n,o,function(t){return e[t]}.bind(null,o));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"08ae":function(e,t,n){},"09de":function(e){e.exports=JSON.parse('[{"id":"stop-1","name":"Fernie Alpine Resort","description":"big ski pole, Plaza Parking Lot 1","point":{"lng":-115.0871505,"lat":49.462295},"schedule":{"route-1":[520,550,580,610,640,670],"route-2":[780,810,840,870,900,930,960,990],"route-3":[]}},{"id":"stop-2","name":"Stanford Resort Hotel","description":"","point":{"lng":-115.078255,"lat":49.486901},"schedule":{"route-1":[470,500,530,560,590,620,650,680],"route-2":[790,820,850,880,910,940,970,1000],"route-3":[1070,1130,1190,1250,1310,1370]}},{"id":"stop-3","name":"Canadas Best Value Inn & Bridge Bistro Restaurant","description":"","point":{"lng":-115.068854,"lat":49.504941},"schedule":{"route-1":[473,503,533,563,593,623,653,683],"route-2":[810,840,870,900,930,960,990,1020],"route-3":[1074,1134,1194,1254,1314,1374]}},{"id":"stop-4","name":"Snow Valley Lodging & Red Tree Lodge","description":"","point":{"lng":-115.0628249,"lat":49.5101194},"schedule":{"route-1":[476,506,536,566,596,626,656,686],"route-2":[807,837,867,897,927,957,987,1017],"route-3":[]}},{"id":"stop-5","name":"Best Western PLUS Fernie Mountain Lodge","description":"","point":{"lng":-115.057986,"lat":49.51459},"schedule":{"route-1":[480,510,540,570,600,630,660,690],"route-2":[800,830,860,890,920,950,980,1010],"route-3":[1082,1142,1202,1262,1322,1382]}},{"id":"stop-6","name":"Fernie RV Resort & Adventure Centre","description":"","point":{"lng":-115.05162,"lat":49.51972},"schedule":{"route-1":[],"route-2":[],"route-3":[]}},{"id":"stop-7","name":"Raging Elk Hostel & Powder Mountain Lodge","description":"on 6th Ave","point":{"lng":-115.0631418,"lat":49.507985},"schedule":{"route-1":[483,513,543,573,603,633,663,693],"route-2":[802,832,862,892,922,952,982,1012],"route-3":[1085,1145,1205,1265,1325,1385]}},{"id":"stop-8","name":"Park Place Lodge","description":"back of hotel on 6th Ave","point":{"lng":-115.06411,"lat":49.507052},"schedule":{"route-1":[486,516,546,576,606,636,666,696],"route-2":[805,835,865,895,925,955,985,1015],"route-3":[1086,1146,1206,1266,1326,1386]}},{"id":"stop-9","name":"901 Fernie / Spa 901","description":"on 2nd Ave","point":{"lng":-115.057986,"lat":49.506734},"schedule":{"route-1":[490,520,550,580,610,640,670,700],"route-2":[795,825,855,885,915,945,975,1005],"route-3":[]}},{"id":"stop-10","name":"Gearhub Sports / Historic Downtown Fernie","description":"","point":{"lng":-115.0617141,"lat":49.5020051},"schedule":{"route-1":[493,523,553,583,613,643,673,703],"route-2":[793,823,853,883,913,943,973,1003],"route-3":[]}},{"id":"stop-11","name":"Super 8 Hotel","description":"","point":{"lng":-115.0806968,"lat":49.4976825},"schedule":{"route-1":[496,526,556,586,616,646,676,706],"route-2":[813,843,873,903,933,963,993,1023],"route-3":[1072,1132,1192,1252,1312,1372]}},{"id":"stop-12","name":"Snow Creek Lodge","description":"","point":{"lng":-115.088987,"lat":49.464881},"schedule":{"route-3":[1050,1110,1170,1230,1290,1350]}},{"id":"stop-13","name":"Lizard Creek Lodge","description":"","point":{"lng":-115.085975,"lat":49.465509},"schedule":{"route-3":[1053,1113,1173,1233,1293,1353]}},{"id":"stop-14","name":"Mountain Pantry Grocery Store","description":"at Fernie Alpine Resort","point":{"lng":-115.084801,"lat":49.462764},"schedule":{"route-3":[1056,1116,1176,1236,1296,1356]}},{"id":"stop-15","name":"Timberline Lodges","description":"","point":{"lng":-115.081211,"lat":49.46358},"schedule":{"route-3":[1060,1120,1180,1240,1300,1360]}},{"id":"stop-16","name":"Historic Downtown Fernie","description":"2nd Ave by Big Bang Bagels","point":{"lng":-115.061428,"lat":49.503092},"schedule":{"route-3":[1077,1137,1197,1257,1317,1377]}},{"id":"stop-17","name":"Historic Downtown Fernie","description":"2nd Ave by Nevados/The Northern","point":{"lng":-115.061276,"lat":49.503495},"schedule":{"route-3":[1089,1149,1209,1269,1329,1389]}}]')},3193:function(e,t,n){},4924:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAA+JJREFUSA2lVltInEcUnv9f3c1ezRpDSBO7JkuIKE1AMMYX6UNKIhKLtoo0RAgIvqQ0RehD3trSF0OTYDAgeTCJ2JdSfQskkaQtFUlBoQqKYiUXEti4FxP36rr/3++bdTYbMc1lDxzPzJk537dzzsz51cTWouW53zQ2N/Yoy2n+OAdRlBtlB5sBOdeh2vDwsNPn89lNm22blkoll5eX4y0tLTGsEVgphlK2JOMKARUoya0TExMV8Xj8kmEY/5pbCPyLyWTy4tTUlA/7GWPZwFBYmL4S5eSm4vr6evvq6uoPwI0p7FDUMCcfG+a9+azlPE9ikO8bGxttiCeZPD0scXO/nmMuWPr6+kq6u7tvWK3WRjpvz5ri5gNDTD99PeGMPrRHiM46XRyvklhifX391ujo6On29vaXWDagMo3qBJKgurraOjk5+avNZjsRiZui5zdD/P0IW98iR5Csn7/QhdehSaKGhoYvkeo0wiQRSSQBrDUcDp/3er3nSfDVoCGeRN6Cnrdc7hXilzNZomg0+qPb7f4Jy+tQgwTUoqGhob0gOIexPMH7EDCG+3lyisvl6hkbG0MysxdBnaKoqanpazgdrMG7pIhgm4VxjIc46urqvoHlRdIVSbHH42niKotciKh4h8NxEjivSDo6OjwWi6UiHDPFP7hFhQhvIXF0Xd83MDCwC1jyJDpespPAD8OFwGdjmSyFU16+fyem2XTZ3W47t7xI8G/honCcTocHaBproj1/9oxXTZRIKo4KE4UTCATiQMqSLCwspAhbUVoYOKP58BTO9PRUiC76dkBdqVTqT7SSj08NZgoq/mG8juEzFpFOpx8C7yiwY0wXa2XgaHdhZS+i/VBhL6MEg8E7MLKt0JOh9vb2DqKrJtjs2Is+RBjHeOL09/dfA0aud7kxYcldc3Nz31ZWVp4ttHctLS1d9vv9F4DJwifVSXi70rW1tVdDodAf7KZsdu96Iu5TzXFlZeV+TU1NH/GgskHKZ48JL4C2tramj4+P/9Xc3Fy5o8Tp+/ywLvxlmgi8NEVgFTs2CYv83We66DmmC3uxJiKRyO9tbW3nkBHu5o0lEcshv2RM13bobqjf6XR+MjMzczWTySTU1+//vozcB+AraO8HEV8O5Y1lF7FC5U3gn+INJ1/KR1A/tKqzs/PY/Pz8zUQi8USR5Vv6FxcXr3d1dX2K/QegJGArYZ35KWam5DthqkhEB8m4yF+wbcPSV9Ta2lpaVXXIW1ZW6goGw9HZ2enIyMjIMtaY9zUo06M0Vw/4TFkLDCiKiP8IEJhEVEkCy3UqRb4tWBIoEhIRXNVBXl/Mzf8A/HvT3wtMiOQAAAAASUVORK5CYII="},5873:function(e){e.exports=JSON.parse('[{"id":"route-1","name":"Morning","description":"The morning route","stops":["stop-1","stop-2","stop-3","stop-4","stop-5","stop-7","stop-8","stop-9","stop-10","stop-11"]},{"id":"route-2","name":"Afternoon","description":"The afternoon route","stops":["stop-1","stop-2","stop-10","stop-9","stop-5","stop-7","stop-8","stop-4","stop-3","stop-11"]},{"id":"route-3","name":"Evening","description":"The evening route","stops":["stop-12","stop-13","stop-14","stop-15","stop-2","stop-11","stop-3","stop-16","stop-5","stop-7","stop-8","stop-17"]}]')},"7f3a":function(e,t,n){"use strict";var o=n("d4b6"),r=n.n(o);r.a},"884b":function(e,t,n){"use strict";var o=n("3193"),r=n.n(o);r.a},"9f5e":function(e,t,n){"use strict";var o=n("d8bd"),r=n.n(o);r.a},a2da:function(e,t,n){"use strict";var o=n("b50a"),r=n.n(o);r.a},b50a:function(e,t,n){},b7cf:function(e,t,n){"use strict";var o=n("08ae"),r=n.n(o);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("e623"),n("e379"),n("5dc8"),n("37e1");var o=n("2b0e"),r=n("9c30"),a=(n("51de"),n("e094"),n("0284")),i=n.n(a),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("md-app",{class:{"os-android":e.isAndroid},attrs:{"md-waterfall":"","md-mode":"fixed-last"}},[n("md-app-toolbar",{staticClass:"md-large md-dense md-primary"},[n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-section-start"},[n("span",{staticClass:"md-title"},[e._v("Fernie Ski Shuttle")])]),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-icon-button",attrs:{to:{name:"info"}}},[n("md-icon",[e._v("info")])],1)],1)]),n("div",{staticClass:"md-toolbar-row"},[n("md-tabs",{staticClass:"md-primary",attrs:{"md-alignment":"fixed","md-sync-route":""}},e._l(e.routes,(function(e){return n("md-tab",{key:e.id,attrs:{"md-label":e.name,to:{name:"route",params:{routeId:e.id}}}})})),1)],1)]),n("md-app-content",[n("router-view")],1)],1)],1)},u=[],c=(n("d3b7"),n("ac1f"),n("466d"),n("96cf"),n("276c")),l=n("e954"),d=n("e1a7"),p=n("f20d"),h=n("920b"),f=n("9ab4"),g=n("60a3");function m(){return!!navigator.userAgent.match(/Android/i)}var v=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.routes=[],e.isAndroid=m(),e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$api.Routes.getAll());case 2:this.routes=e.sent,this.$route.params.routeId||this.$router.push({name:"route",params:{routeId:this.routes[0].id}});case 4:case"end":return e.stop()}}),null,this)}}]),t}(g["d"]);v=f["a"]([g["a"]],v);var b=v,y=b,O=(n("b7cf"),n("2877")),k=Object(O["a"])(y,s,u,!1,null,"6dc79ca2",null),j=k.exports,w=n("9483");Object(w["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var M=n("8c4f"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map"},[n("google-map",{attrs:{apiKey:e.apiKey,stops:e.stops},on:{click:e.handleMapClicked},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.google,r=t.map;return e._l(e.stops,(function(t,a){return n("google-map-marker",{key:t.id,attrs:{google:o,map:r,stop:t,position:a},on:{click:e.handleMarkerClicked}})}))}}])}),e.currentStop?n("stop-card",{attrs:{stop:e.currentStop},on:{closed:e.closeCurrentCard}}):e._e()],1)},S=[],A=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-card",{staticClass:"md-card-location",style:e.style,attrs:{"md-with-hover":""},nativeOn:{touchstart:function(t){return e.dragStart(t)},touchmove:function(t){return e.drag(t)},touchend:function(t){return e.dragEnd(t)},mousedown:function(t){return e.dragStart(t)},mousemove:function(t){return e.drag(t)},mouseup:function(t){return e.dragEnd(t)}}},[n("div",{staticClass:"card-tab"}),n("md-card-area",{ref:"stopDetails",attrs:{"md-inset":""},nativeOn:{click:function(t){return e.handleClick(t)}}},[n("md-card-header",[n("md-card-header-text",[n("h2",{staticClass:"md-title"},[e._v(e._s(e.stop.name))]),e.stop.description?n("div",{staticClass:"md-subhead"},[n("span",[e._v(e._s(e.stop.description))])]):e._e()]),n("div",{staticClass:"md-card-status"},[e._v(" Next shuttle"),n("br"),e._v(" "+e._s(e.nextDue)+" ")])],1)],1),n("md-card-content",{ref:"stopTimetable"},[n("md-list",{staticClass:"md-dense"},[n("md-subheader",[e._v("Morning")]),n("stop-timetable",{attrs:{"route-id":"route-1",stop:e.stop}}),n("md-subheader",[e._v("Afternoon")]),n("stop-timetable",{attrs:{"route-id":"route-2",stop:e.stop}}),n("md-subheader",[e._v("Evening")]),n("stop-timetable",{attrs:{"route-id":"route-3",stop:e.stop}})],1)],1)],1)}),x=[],P=(n("a4d3"),n("4de4"),n("4160"),n("0d03"),n("e439"),n("dbb4"),n("b64b"),n("07ac"),n("159b"),n("d0ff")),T=n("fc11"),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list-item",[e.times&&e.times.length?n("div",{staticClass:"pre-wrap"},e._l(e.times,(function(t,o){return n("div",{key:o,staticClass:"inline"},[n("span",[e._v(e._s(e._f("convertTime")(t)))]),o<e.times.length-1?n("span",[e._v(" | ")]):e._e()])})),0):n("div",{staticClass:"pre-wrap"},[e._v(" The shuttle does not stop at this location. ")])])},R=[],E=(n("e01a"),n("d28b"),n("99af"),n("4e82"),n("3ca3"),n("ddb0"),n("d0af"));function I(e,t){var n="".concat(e);while(n.length<t)n="0".concat(n);return n}function _(e){var t=Math.floor(e/60),n=Math.floor(e-60*t),o=t<12?t:t-12,r=t<12?"AM":"PM";return"".concat(I(o,2),":").concat(I(n,2)," ").concat(r)}function Y(e,t){var n=e-t;return n<=30&&n>=0}function U(e){var t=new Date,n=60*t.getHours()+t.getMinutes(),o=e.sort((function(e,t){return e-t})),r=-1,a=!0,i=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(n<l){r=l;break}}}catch(p){i=!0,s=p}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}if(r<0){var d=Object(E["a"])(o,1);r=d[0]}return Y(r,n)?"in ".concat(r-n," min"):"at ".concat(_(r))}var L=function(e){function t(){return Object(c["a"])(this,t),Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"times",get:function(){return this.stop.schedule[this.routeId]}}]),t}(g["d"]);f["a"]([Object(g["c"])({type:String,required:!0})],L.prototype,"routeId",void 0),f["a"]([Object(g["c"])({type:Object,required:!0})],L.prototype,"stop",void 0),L=f["a"]([Object(g["a"])({filters:{convertTime:_}})],L);var B=L,F=B,N=(n("884b"),Object(O["a"])(F,D,R,!1,null,"8c57f7bc",null)),K=N.exports;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(T["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.style={bottom:"-100%",transform:""},e.openMin=0,e.openMax=0,e.closedMin=0,e.closedMax=0,e.yOffset=0,e.dragging=!1,e.nextDue="",e.fullSchedule=[],e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"mounted",value:function(){var e=this;this.updateMeasurements(),this.updateFullSchedule();var t=60-(new Date).getSeconds();setTimeout((function(){e.autoUpdateDue=setInterval(e.calculateNextDue.bind(e),6e4)}),1e3*t)}},{key:"beforeDestroy",value:function(){this.autoUpdateDue&&clearInterval(this.autoUpdateDue)}},{key:"handleUpdateStop",value:function(){this.updateFullSchedule(),setTimeout(this.updateMeasurements.bind(this),0)}},{key:"updateMeasurements",value:function(){var e=this.$refs.stopTimetable.$el.clientHeight+8,t=this.$refs.stopDetails.$el.clientHeight;this.openMin=-e/2,this.openMax=-e,this.closedMin=t/2,this.closedMax=t,this.style=z({},this.style,{bottom:"-".concat(this.$refs.stopTimetable.$el.clientHeight+8,"px")})}},{key:"updateFullSchedule",value:function(){for(var e=[],t=0,n=Object.values(this.stop.schedule);t<n.length;t++){var o=n[t];e.push.apply(e,Object(P["a"])(o))}this.fullSchedule=e,this.calculateNextDue()}},{key:"calculateNextDue",value:function(){this.nextDue=U(this.fullSchedule)}},{key:"handleClick",value:function(){0===this.currentY&&(this.setYPosition(this.openMax),this.$ga.event("Card","click-open",this.stop.name))}},{key:"dragStart",value:function(e){"touchstart"===e.type?this.initialY=e.touches[0].clientY-this.yOffset:this.initialY=e.clientY-this.yOffset,this.dragging=!0}},{key:"drag",value:function(e){if(this.dragging){if(e.preventDefault(),"touchmove"===e.type?this.currentY=e.touches[0].clientY-this.initialY:this.currentY=e.clientY-this.initialY,this.yOffset=this.currentY,this.yOffset<=this.openMax)return;this.setYTranslate(this.currentY)}}},{key:"dragEnd",value:function(){this.dragging=!1,this.yOffset<=this.openMin?(this.setYPosition(this.openMax),this.$ga.event("Card","drag-open",this.stop.name)):this.yOffset>=this.closedMin?(this.setYPosition(this.closedMax),this.$ga.event("Card","drag-close",this.stop.name),this.$emit("closed")):(this.setYPosition(0),this.$ga.event("Card","drag-half",this.stop.name))}},{key:"setYTranslate",value:function(e){this.style=z({},this.style,{transform:"translate(0, ".concat(e,"px)")})}},{key:"setYPosition",value:function(e){this.initialY=e,this.currentY=e,this.yOffset=e,this.setYTranslate(e)}}]),t}(g["d"]);f["a"]([Object(g["c"])({type:Object,required:!0,default:function(){return{}}})],H.prototype,"stop",void 0),f["a"]([Object(g["e"])("stop")],H.prototype,"handleUpdateStop",null),H=f["a"]([Object(g["a"])({components:{StopTimetable:K}})],H);var V=H,$=V,X=(n("7f3a"),Object(O["a"])($,A,x,!1,null,"5d038d44",null)),G=X.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"google-map"},[n("div",{ref:"googleMap",staticClass:"google-map"}),Boolean(this.google)&&Boolean(this.map)?[e._t("default",null,{google:e.google,map:e.map})]:e._e()],2)},W=[],Z=(n("d81d"),n("a709")),Q=n.n(Z);function ee(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e(n)}),(function(e){console.warn("Error getting user location"),t(e)}),{timeout:5e3}):(console.warn("Error getting user location, no browser support"),t())}))}var te=n("4924"),ne=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.google=null,e.autoUpdateId=-1,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"mounted",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Q()({key:this.apiKey}));case 2:e=t.sent,this.google=e,this.initializeMap();case 5:case"end":return t.stop()}}),null,this)}},{key:"beforeDestroy",value:function(){clearTimeout(this.autoUpdateId)}},{key:"initializeMap",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(this.google){t.next=2;break}return t.abrupt("return");case 2:return e=this.$refs.googleMap,this.map=new this.google.Map(e,this.config),t.next=6,regeneratorRuntime.awrap(this.autoUpdateCurrentLocation());case 6:this.handleStopsChanged(this.stops),this.google.event.addListener(this.map,"click",this.handleMapClicked);case 8:case"end":return t.stop()}}),null,this)}},{key:"autoUpdateCurrentLocation",value:function(){var e,t=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(this.google){n.next=2;break}return n.abrupt("return");case 2:return clearTimeout(this.autoUpdateId),n.prev=3,n.next=6,regeneratorRuntime.awrap(ee());case 6:e=n.sent,this.currentPos=e,this.currentPosMarker?this.currentPosMarker.setPosition(e):this.currentPosMarker=new this.google.Marker({position:e,map:this.map,icon:te}),n.next=18;break;case 11:if(n.prev=11,n.t0=n["catch"](3),1!==n.t0.code){n.next=17;break}return clearTimeout(this.autoUpdateId),this.$ga.exception("GeoLocation permission denied"),n.abrupt("return");case 17:console.error(n.t0);case 18:this.autoUpdateId=setTimeout((function(){t.autoUpdateCurrentLocation()}),3e3);case 19:case"end":return n.stop()}}),null,this,[[3,11]])}},{key:"handleStopsChanged",value:function(e){if(this.google){var t=new this.google.LatLngBounds;e.forEach((function(e){t.extend(e.point)})),this.currentPos&&t.extend(this.currentPos),this.map.fitBounds(t)}}},{key:"handleMapClicked",value:function(){return this.map}}]),t}(g["d"]);f["a"]([Object(g["c"])({type:String,required:!1})],ne.prototype,"apiKey",void 0),f["a"]([Object(g["c"])({type:Object,required:!1,default:function(){return{center:{lat:49.487312,lng:-115.076268},zoom:13,streetViewControl:!1,fullscreenControl:!1,gestureHandling:"greedy"}}})],ne.prototype,"config",void 0),f["a"]([Object(g["c"])({type:Array,default:function(){return[]}})],ne.prototype,"stops",void 0),f["a"]([Object(g["e"])("stops")],ne.prototype,"handleStopsChanged",null),f["a"]([Object(g["b"])("click")],ne.prototype,"handleMapClicked",null),ne=f["a"]([g["a"]],ne);var oe=ne,re=oe,ae=(n("a2da"),Object(O["a"])(re,J,W,!1,null,"1fac330b",null)),ie=ae.exports,se=(n("a9e3"),function(e){function t(){return Object(c["a"])(this,t),Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"render",value:function(){return this.$slots.default}},{key:"mounted",value:function(){this.gmapMarker=new this.google.Marker({position:this.stop.point,map:this.map,label:"".concat(this.position+1)}),this.google.event.addListener(this.gmapMarker,"click",this.handleMarkerClicked)}},{key:"beforeDestroy",value:function(){this.gmapMarker.setMap(null)}},{key:"updateMarkerLabel",value:function(){this.gmapMarker.setLabel("".concat(this.position+1))}},{key:"handleMarkerClicked",value:function(){return this.stop}}]),t}(g["d"]));f["a"]([Object(g["c"])({type:Object,required:!0})],se.prototype,"google",void 0),f["a"]([Object(g["c"])({type:Object,required:!0})],se.prototype,"map",void 0),f["a"]([Object(g["c"])({type:Object,required:!0})],se.prototype,"stop",void 0),f["a"]([Object(g["c"])({type:Number,default:""})],se.prototype,"position",void 0),f["a"]([Object(g["e"])("position")],se.prototype,"updateMarkerLabel",null),f["a"]([Object(g["b"])("click")],se.prototype,"handleMarkerClicked",null),se=f["a"]([Object(g["a"])({name:"google-map-marker"})],se);var ue,ce,le=se,de=le,pe=Object(O["a"])(de,ue,ce,!1,null,null,null),he=pe.exports,fe={Container:ie,Marker:he},ge=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.apiKey="AIzaSyBdkr-Nv2ylWr-Bpdy1H5uqf_CAoSnTosk",e.stops=[],e.currentStop=null,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"created",value:function(){this.handleRouteIdChanged(this.routeId)}},{key:"handleRouteIdChanged",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$api.Routes.get(e));case 2:return this.route=t.sent,t.next=5,regeneratorRuntime.awrap(this.$api.Stops.hydrate(this.route.stops));case 5:this.stops=t.sent;case 6:case"end":return t.stop()}}),null,this)}},{key:"handleMarkerClicked",value:function(e){this.currentStop=e,this.$ga.event("Card","click-open",e.name)}},{key:"handleMapClicked",value:function(){this.currentStop&&(this.$ga.event("Card","click-close",this.currentStop.name),this.closeCurrentCard())}},{key:"closeCurrentCard",value:function(){this.currentStop&&(this.currentStop=null)}}]),t}(g["d"]);f["a"]([Object(g["c"])({type:String,required:!0})],ge.prototype,"routeId",void 0),f["a"]([Object(g["e"])("routeId")],ge.prototype,"handleRouteIdChanged",null),ge=f["a"]([Object(g["a"])({components:{StopCard:G,GoogleMap:fe.Container,GoogleMapMarker:fe.Marker}})],ge);var me=ge,ve=me,be=(n("9f5e"),Object(O["a"])(ve,C,S,!1,null,"512a4977",null)),ye=be.exports;o["default"].use(M["a"]);var Oe=[{path:"/",name:"home",redirect:"route"},{path:"/route/:routeId",name:"route",component:ye,props:!0},{path:"/info",name:"info",component:function(){return n.e("info").then(n.bind(null,"13ac"))}}],ke=new M["a"]({mode:"history",base:"/",routes:Oe}),je=ke,we=(n("7db0"),function(){function e(t){Object(c["a"])(this,e),this.data=t}return Object(l["a"])(e,[{key:"getAll",value:function(){var e=this;return new Promise((function(t){return t(e.data)}))}},{key:"get",value:function(e){var t=this;return new Promise((function(n){var o=t.data.find((function(t){return t.id===e}));n(o)}))}},{key:"hydrate",value:function(e){var t=this;return new Promise((function(n){var o=e.map((function(e){return t.data.find((function(t){return t.id===e}))})).filter((function(e){return!!e}));n(o)}))}}]),e}()),Me=n("09de"),Ce=Me,Se=n("5873"),Ae=Se,xe=new we(Ce),Pe=new we(Ae),Te={Stops:xe,Routes:Pe};o["default"].use(i.a,{id:"UA-154352057-1",router:je,disabled:!1,autoTracking:{exception:!0}}),o["default"].config.productionTip=!1,o["default"].prototype.$api=Te,o["default"].use(r["MdApp"]),o["default"].use(r["MdButton"]),o["default"].use(r["MdCard"]),o["default"].use(r["MdContent"]),o["default"].use(r["MdDrawer"]),o["default"].use(r["MdDivider"]),o["default"].use(r["MdIcon"]),o["default"].use(r["MdList"]),o["default"].use(r["MdSubheader"]),o["default"].use(r["MdTabs"]),o["default"].use(r["MdToolbar"]),new o["default"]({router:je,render:function(e){return e(j)}}).$mount("#app")},d4b6:function(e,t,n){},d8bd:function(e,t,n){}});
//# sourceMappingURL=app.b465408d.js.map